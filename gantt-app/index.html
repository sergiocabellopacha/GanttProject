<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ProjectFlow - Gesti√≥n de Proyectos</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="app-header">
        <div class="header-content">
            <div class="title-section">
                <h1 class="app-title">ProjectFlow</h1>
                <p class="app-subtitle">Gesti√≥n de proyectos con diagramas de Gantt</p>
            </div>
            <div class="toolbar-integrated">
                <div class="toolbar-left">
                    <div class="toolbar-section file-actions">
                        <button id="new-project" class="btn">Nuevo</button>
                        <button id="import-json" class="btn">Abrir</button>
                        <button id="export-json" class="btn">Guardar</button>
                        <button id="import-csv" class="btn">Abrir CSV</button>
                        <button id="export-csv" class="btn">Guardar CSV</button>
                    </div>
                    <div class="toolbar-section task-actions">
                        <button id="add-task" class="btn btn-primary">+ A√±adir</button>
                        <button id="expand-all" class="btn">Expandir Todo</button>
                        <button id="collapse-all" class="btn">Colapsar Todo</button>
                        <button id="update-groups" class="btn">Actualizar fechas de grupos</button>
                    </div>
                </div>
                <div class="toolbar-right">
                    <div class="toolbar-section help-actions">
                        <button id="help-btn" class="btn btn-help">Help</button>
                        <button id="about-btn" class="btn btn-info">About</button>
                    </div>
                    <div class="toolbar-section zoom-actions">
                        <button id="zoom-in" class="btn">Zoom +</button>
                        <button id="zoom-out" class="btn">Zoom -</button>
                        <button id="zoom-fit" class="btn">Ajustar</button>
                    </div>
                </div>
            </div>
        </div>
        <input type="file" id="file-input" style="display:none" accept="application/json">
        <input type="file" id="csv-file-input" style="display:none" accept=".csv,text/csv">
    </div>

    <div class="gantt-wrapper">
        <div class="gantt-table">
            <div class="table-header">
                <div class="col-task-name">Nombre de Tarea</div>
                <div class="col-id">ID</div>
                <div class="col-start">Inicio</div>
                <div class="col-end">Fin</div>
                <div class="col-duration">Duraci√≥n (D√≠as Laborables)</div>
                <div class="col-progress">Progreso %</div>
                <div class="col-dependency">Dependencia</div>
                <div class="col-resource">Recursos</div>
                <div class="col-color">Color</div>
            </div>
            <div class="table-body" id="task-table-body">
                <!-- Tasks will be populated here -->
            </div>
        </div>

        <div class="gantt-chart">
            <div class="timeline-header" id="timeline-header">
                <!-- Timeline will be populated here -->
            </div>
            <div class="chart-body" id="chart-body">
                <!-- Chart bars will be populated here -->
            </div>
        </div>
    </div>

    <!-- Task Edit Modal -->
    <div id="task-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Editar Tarea</h2>
            <form id="task-form">
                <div class="form-row">
                    <label>Nombre: <input type="text" id="task-name" required></label>
                    <label>Color: 
                        <input type="color" id="task-color" value="#4a90e2" title="Seleccionar color de la tarea">
                    </label>
                </div>
                <div class="form-row">
                    <label>Tipo: 
                        <select id="task-type" onchange="toggleTaskFields()">
                            <option value="task">Tarea</option>
                            <option value="group">Grupo</option>
                        </select>
                    </label>
                    <label>Grupo Padre: 
                        <select id="task-parent">
                            <option value="">Ninguno (Ra√≠z)</option>
                        </select>
                    </label>
                </div>
                <div class="form-row">
                    <label>Fecha Inicio: <input type="date" id="task-start" required onchange="validateWorkdayDate(this)"></label>
                    <label>Fecha Fin: <input type="date" id="task-end" required onchange="validateWorkdayDate(this)"></label>
                </div>
                <div class="form-row">
                    <label>Progreso: <input type="number" id="task-progress" min="0" max="100" value="0"></label>
                    <label>Recursos: <input type="text" id="task-resources" placeholder="Asignado a..."></label>
                </div>
                <label>Dependencias: <input type="text" id="task-dependencies" placeholder="IDs separados por comas"></label>
                <div class="form-buttons">
                    <button type="submit" class="btn btn-primary">Guardar</button>
                    <button type="button" id="delete-task" class="btn btn-danger">Eliminar</button>
                    <button type="button" id="cancel-task" class="btn">Cancelar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="help-modal" class="modal">
        <div class="modal-content help-modal-content">
            <span class="close help-close">&times;</span>
            <div class="help-header">
                <h2>üìñ Gu√≠a de Uso - ProjectFlow</h2>
                <p>Aprende a usar todas las funcionalidades de esta aplicaci√≥n de gesti√≥n de proyectos</p>
            </div>
            <div class="help-body">
                <div class="help-section">
                    <h3>üöÄ Primeros Pasos</h3>
                    <ul>
                        <li><strong>Crear Nueva Tarea:</strong> Haz clic en el bot√≥n "+ A√±adir" para crear una nueva tarea</li>
                        <li><strong>Editar Tarea:</strong> Haz clic en cualquier nombre de tarea en la tabla para editarla</li>
                        <li><strong>Eliminar Tarea:</strong> Edita la tarea y haz clic en "Eliminar"</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>üìä Gesti√≥n de Tareas</h3>
                    <h4>Tipos de Tareas:</h4>
                    <ul>
                        <li><strong>Tarea Individual:</strong> Una tarea espec√≠fica con fechas de inicio y fin</li>
                        <li><strong>Grupo:</strong> Contenedor que agrupa varias tareas relacionadas</li>
                    </ul>
                    <h4>Campos de Tarea:</h4>
                    <ul>
                        <li><strong>Nombre:</strong> Descripci√≥n de la tarea</li>
                        <li><strong>Fechas:</strong> Solo se permiten d√≠as laborables (lunes a viernes)</li>
                        <li><strong>Progreso:</strong> Porcentaje de completado (0-100%)</li>
                        <li><strong>Recursos:</strong> Persona o equipo asignado</li>
                        <li><strong>Dependencias:</strong> IDs de tareas que deben completarse primero</li>
                        <li><strong>Color:</strong> Color visual para identificar la tarea en el gr√°fico</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>üèóÔ∏è Grupos y Jerarqu√≠as</h3>
                    <ul>
                        <li><strong>Crear Grupo:</strong> Selecciona "Grupo" en el tipo de tarea</li>
                        <li><strong>Asignar a Grupo:</strong> En "Grupo Padre" selecciona el grupo contenedor</li>
                        <li><strong>Expandir/Colapsar:</strong> Haz clic en los iconos ‚ñ∂/‚ñº junto a los grupos</li>
                        <li><strong>Fechas Autom√°ticas:</strong> Los grupos calculan autom√°ticamente sus fechas bas√°ndose en las tareas hijas</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>üéØ Gr√°fico de Gantt Interactivo</h3>
                    <h4>Arrastrar y Soltar:</h4>
                    <ul>
                        <li><strong>Mover Tarea:</strong> Arrastra desde el centro de la barra para mover toda la tarea</li>
                        <li><strong>Cambiar Inicio:</strong> Arrastra desde el borde izquierdo para cambiar fecha de inicio</li>
                        <li><strong>Cambiar Fin:</strong> Arrastra desde el borde derecho para cambiar fecha de fin</li>
                        <li><strong>Doble Clic:</strong> Doble clic en una barra para editar la tarea</li>
                    </ul>
                    <h4>Elementos Visuales:</h4>
                    <ul>
                        <li><strong>Barras de Tarea:</strong> Representan la duraci√≥n de cada tarea</li>
                        <li><strong>Barras de Progreso:</strong> √Årea azul dentro de la barra que indica el avance</li>
                        <li><strong>L√≠neas de Dependencia:</strong> Flechas que conectan tareas dependientes</li>
                        <li><strong>D√≠as de Fin de Semana:</strong> Columnas sombreadas para s√°bados y domingos</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>üîÑ Dependencias</h3>
                    <ul>
                        <li><strong>Crear Dependencia:</strong> En el campo "Dependencias" escribe los IDs de las tareas precedentes separados por comas</li>
                        <li><strong>Ejemplo:</strong> "1, 3, 5" significa que esta tarea depende de las tareas 1, 3 y 5</li>
                        <li><strong>Visualizaci√≥n:</strong> Se muestran como l√≠neas con flechas conectando las tareas</li>
                        <li><strong>Colores:</strong> Las l√≠neas usan el color de la tarea de origen</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>üîç Controles de Zoom y Vista</h3>
                    <ul>
                        <li><strong>Zoom +:</strong> Ampl√≠a la vista para ver m√°s detalles</li>
                        <li><strong>Zoom -:</strong> Reduce la vista para ver m√°s tiempo</li>
                        <li><strong>Ajustar:</strong> Ajusta autom√°ticamente el zoom para mostrar todo el proyecto</li>
                        <li><strong>Expandir Todo:</strong> Muestra todas las tareas dentro de los grupos</li>
                        <li><strong>Colapsar Todo:</strong> Oculta las tareas dentro de los grupos</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>üíæ Guardar y Cargar Proyectos</h3>
                    <h4>Formato JSON (Recomendado):</h4>
                    <ul>
                        <li><strong>Guardar:</strong> Exporta todo el proyecto con formato completo</li>
                        <li><strong>Abrir:</strong> Carga un proyecto previamente guardado</li>
                        <li><strong>Ventajas:</strong> Preserva toda la informaci√≥n: colores, dependencias, jerarqu√≠as</li>
                    </ul>
                    <h4>Formato CSV (Compatibilidad):</h4>
                    <ul>
                        <li><strong>Guardar CSV:</strong> Exporta como hoja de c√°lculo</li>
                        <li><strong>Abrir CSV:</strong> Importa desde Excel u otras aplicaciones</li>
                        <li><strong>Formato:</strong> ID, Nombre, Inicio, Fin, Progreso, Dependencias, Recursos, Color, Es Grupo, Grupo Padre</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>‚ö° Consejos y Trucos</h3>
                    <ul>
                        <li><strong>D√≠as Laborables:</strong> El sistema autom√°ticamente excluye fines de semana</li>
                        <li><strong>Colores Personalizados:</strong> Haz clic en el indicador de color en la tabla para cambiar colores r√°pidamente</li>
                        <li><strong>Progreso Visual:</strong> La barra azul dentro de cada tarea muestra el progreso actual</li>
                        <li><strong>Fechas de Grupos:</strong> Se actualizan autom√°ticamente bas√°ndose en las tareas hijas</li>
                        <li><strong>Validaci√≥n:</strong> El sistema previene fechas inv√°lidas y dependencias circulares</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>üé® Personalizaci√≥n</h3>
                    <ul>
                        <li><strong>Cambiar Colores:</strong> Cada tarea puede tener su propio color identificativo</li>
                        <li><strong>Organizaci√≥n:</strong> Usa grupos para organizar tareas por fase, departamento o tipo</li>
                        <li><strong>Recursos:</strong> Asigna responsables para un mejor seguimiento</li>
                        <li><strong>Timeline Flexible:</strong> La vista se ajusta autom√°ticamente al rango de fechas del proyecto</li>
                    </ul>
                </div>

                <div class="help-section">
                    <h3>‚ùó Soluci√≥n de Problemas</h3>
                    <ul>
                        <li><strong>Tarea no se mueve:</strong> Aseg√∫rate de no estar arrastrando un grupo</li>
                        <li><strong>Fecha inv√°lida:</strong> Verifica que no sea fin de semana</li>
                        <li><strong>Dependencia no aparece:</strong> Confirma que los IDs de dependencia existan</li>
                        <li><strong>Proyecto no carga:</strong> Verifica que el archivo JSON tenga el formato correcto</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- About Modal -->
    <div id="about-modal" class="modal">
        <div class="modal-content about-modal-content">
            <span class="close about-close">&times;</span>
            <div class="about-header">
                <h2>Acerca de ProjectFlow</h2>
            </div>
            <div class="about-body">
                <div class="about-section">
                    <h3>Desarrollador</h3>
                    <p><strong>Sergio Cabello Pacha</strong></p>
                </div>
                
                <div class="about-section">
                    <h3>Contacto y Enlaces</h3>
                    <div class="links-container">
                        <a href="mailto:sergio.cabello.pacha@gmail.com" class="about-link">
                            <span class="link-icon">üìß</span>
                            <span>sergio.cabello.pacha@gmail.com</span>
                        </a>
                        <a href="https://github.com/sergiocabellopacha/GanttProject" target="_blank" class="about-link">
                            <span class="link-icon">üîó</span>
                            <span>Repositorio GitHub</span>
                        </a>
                        <a href="https://www.linkedin.com/in/sergiocabellopacha/" target="_blank" class="about-link">
                            <span class="link-icon">üíº</span>
                            <span>LinkedIn</span>
                        </a>
                    </div>
                </div>
                
                <div class="about-section">
                    <h3>Tecnolog√≠as</h3>
                    <p>Esta aplicaci√≥n ha sido desarrollada con:</p>
                    <ul>
                        <li>HTML5, CSS3 y JavaScript vanilla</li>
                        <li>Asistencia de <strong>GitHub Copilot</strong></li>
                        <li>Asistencia de <strong>Claude Sonnet 4</strong></li>
                    </ul>
                </div>
                
                <div class="about-section">
                    <h3>Caracter√≠sticas</h3>
                    <ul>
                        <li>Diagramas de Gantt interactivos</li>
                        <li>Gesti√≥n de tareas y dependencias</li>
                        <li>Importaci√≥n/Exportaci√≥n JSON</li>
                        <li>Importaci√≥n/Exportaci√≥n CSV</li>
                        <li>Interfaz responsive y moderna</li>
                        <li>Gesti√≥n de recursos y progreso</li>
                    </ul>
                </div>
                
                <div class="about-section">
                    <h3>Versi√≥n</h3>
                    <p>v1.0.0 - Septiembre 2025</p>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
